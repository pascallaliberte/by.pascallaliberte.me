---
layout: post
title: Hassle Sans
date: '2010-05-19T17:13:00-04:00'
tags: 
tumblr_url: http://pascallaliberte.me/post/614087600/hassle-sans
---
<p>Google <a href="http://googlecode.blogspot.com/2010/05/introducing-google-font-api-google-font.html">announced today</a> that they&#8217;re hosting free web fonts for use on modern browsers.</p>
<p>You include fonts by first referencing a style sheet from fonts.googleapis.com, which at first glance handles the font inclusion.  Pretty smart.</p>
<pre><code>&lt;link href='http://fonts.googleapis.com/css?family=<strong>Droid+Sans</strong>' rel='stylesheet' type='text/css'&gt;</code></pre>
<p>The resulting style sheet looks like this:</p>
<pre><code>@font-face {
  font-family: 'Droid Sans';
  font-style: normal;
  font-weight: normal;
  src: local('Droid Sans'), url('http://themes.googleusercontent.com/font?kit=POVDFY-UUf0WFR9DIMCU8g') format('truetype');
}</code></pre>
<p>But since browsers don&#8217;t implement font inclusion the same way, I wondered if Google did user-agent detection.  Turns out they do.</p>
<p><strong>IE6 gets this CSS returned:</strong></p>
<pre><code>@font-face {
  font-family: 'Droid Sans';
  src: url('http://themes.googleusercontent.com/font?kit=POVDFY-UUf0WFR9DIMCU8g');
}</code></pre>
<p>Clever.</p>
<p><strong>CSS-based (Google Web Fonts) vs. JS-based (TypeKit)</strong></p>
<p>With Google&#8217;s CSS-based approach with user-agent detection, you&#8217;ve got a solution to use free fonts that &#8212; it turns out &#8212; <a href="http://webfonts.info/wiki/index.php?title=%40font-face_browser_support">works in pretty much all browsers</a> but its main caveat is the <a href="http://code.google.com/apis/webfonts/faq.html#While_Loading">flash of unstyled text</a> (FOUT for short):</p>
<blockquote>
<p><span>Some [browsers] will only display the text after the font file is loaded, others will use the fallback font from the font stack and then refresh the page when the font is available. The latter behavior is generally referred to as the &#8220;flash of unstyled text.&#8221;</span></p>
</blockquote>
<p><span>That&#8217;s where javascript-based solutions come in.  <a href="http://typekit.com/">Typekit</a>, the pay-per-month, no-licensing-headache professional web font purveyor, deals with the FOUT via a javascript solution.  And today they&#8217;ve <a href="http://www.webmonkey.com/2010/05/google-typekit-join-up-to-improve-web-fonts/">announced they&#8217;re open-sourcing their code</a>, in collaboration with Google, under the new project called <a href="http://code.google.com/apis/webfonts/docs/webfont_loader.html">WebFont Loader</a>:</span></p>
<blockquote>
<p><span><span>You can use WebFont Loader with fonts on your own server, links to the just-announced Google Webfont API, or any Typekit account. We’ve also made sure the code is modular, so other font hosting services can add to it in the future.</span></span></p>
</blockquote>
<p><strong>Update:</strong> I initially stated that the <code>src</code> URLs were different between the CSS two code samples, but quickly realized they&#8217;re the same: <code>font?kit=POVDFY-UUf0WFR9DIMCU8g</code></p>
<p>After a bit of testing, the URLs may be the same, but Google does a second round of user-agent detection.  In Firefox, a .ttf is returned, while in IE, an .eot is returned.</p>
